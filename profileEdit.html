<!doctype html>
<html lang="tr">
  <head>
  	<title>ELECTRA - Profil Düzenle</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="ProfilePage/css/styleProfile.css">
    <style>
     body {
    background: rgba(241, 243, 248, 0.792)
}

.form-control:focus {
    box-shadow: none;
    border-color: #BA68C8
}

.profile-button {
    background: rgb(99, 39, 120);
    box-shadow: none;
    border: none
}

.profile-button:hover {
    background: #682773
}

.profile-button:focus {
    background: #682773;
    box-shadow: none
}

.profile-button:active {
    background: #682773;
    box-shadow: none
}

.back:hover {
    color: #682773;
    cursor: pointer
}

.labels {
    font-size: 11px
}

.button2 {
    background-color: rgb(9, 125, 233);
    color: rgb(240, 240, 245);
    position: relative;
    margin-left: 12px;
    margin-top: 20px;
    border-style: none;
    font-size: 14px;
    border-radius: 5px;
    padding: 8px;

}

h3 {
        padding-left: 10px;
        padding-top: 8px;
        font-weight: bold;
        color: #007bff;;
      }


  </style>
  </head>
  <body>
		
		<div class="wrapper d-flex align-items-stretch">
			<nav id="sidebar">
				<div class="p-4 pt-5">
		  		<a href="#" class="img logo rounded-circle mb-5" style="background-image: url(ProfilePage/images/user.jpeg);"></a>
          <h3 class="name">Profil</h3>
	        <ul class="list-unstyled components mb-5">
            <li class="active">
              <li>
	            <a href="" data-toggle="collapse" aria-expanded="false" ></a>
              <li>
                <a href="index.html">Ana Sayfa</a>
              </li>
            <li>
                <a href="map.html">Harita</a>
              </li>
	          </li>
	          <li>
	              <a href="car.html">Popüler Elektrikli Arabalar</a>
	          </li>
	
	          <li>
              <a href="aboutUs.html">Hakkımızda</a>
	          </li>
	          <li>
              <a href="news.html">Haberler</a>
	          </li>
	        </ul>

	         <div class="footer">
	        
	        </div> 

	      </div>
    	</nav>

      
      <div id="content" class="p-4 p-md-5">

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
          <div class="container-fluid">

            <button type="button" id="sidebarCollapse" class="btn btn-primary">
              <i class="fa fa-bars"></i>
              <span class="sr-only">Toggle Menu</span>
            </button>
            <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa fa-bars"></i>
            </button>

            <h3>ELECTRA</h3>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="nav navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="profile2.html">Profil</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="profileEdit.html">Profili Düzenle</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
        <div class="container rounded bg-white mt-5 mb-5">
            <div class="row">
                <div class="col-md-5 border-right">
                    <div class="p-3 py-5">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4 class="text-right">Profil Ayarları</h4>
                        </div>
                        <div class="row mt-2">
                            <div class="col-md-6"><label class="labels">İsim</label><input type="text" id="isim" class="form-control" placeholder="İsim" value=""></div>
                            <div class="col-md-6"><label class="labels">Soyisim</label><input type="text" id="soyisim" class="form-control" value="" placeholder="Soyisim"></div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-12"><label class="labels">Telefon Numarası</label><input type="text" id="telefon" class="form-control" placeholder="Telefon Numarası" value=""></div>
                            <div class="col-md-12"><label class="labels">Meslek</label><input type="text" id="meslek" class="form-control" placeholder="Meslek" value=""></div>
                            <div class="col-md-12"><label class="labels">Adres</label><input type="text" id="adres" class="form-control" placeholder="Adres" value=""></div>
                            <div class="col-md-12"><label class="labels">Şehir</label><input type="text" id="sehir" class="form-control" placeholder="Şehir" value=""></div>
                            <div class="col-md-12"><label class="labels">Mail</label><input type="text" id="mail" class="form-control" placeholder="Mail" value=""></div>
                        </div>
                        <div class="mt-5 text-center"><button class="btn btn-primary profile-button" type="button" id="savedButton">Profili Kaydet</button></div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="p-3 py-5">
                        <div class="d-flex justify-content-between align-items-center experience"><span>Sahip Olunan Arabalar</span></div><br>
                        <div class="col-md-12"><label class="labels">Araba Markası</label><input type="text" id="marka" class="form-control" placeholder="Markası" value=""></div> <br>
                        <div class="col-md-12"><label class="labels">Araba Modeli</label><input type="text" id="model" class="form-control" placeholder="Modeli" value=""></div>
                        <div ><button class="button2" type="button" id="carButton">Arabayı Kaydet</button></div>
                    </div>
                    
                </div>
               
            </div>
        </div>
        </div>
        </div>

      
		</div>

    <script src="ProfilePage/js/bootstrap.min.js"></script>
    <script src="ProfilePage/js/jquery.min.js"></script>
    <script src="ProfilePage/js/main.js"></script>
    <script src="ProfilePage/js/popper.js"></script>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
      import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

       // Firebase configuration
       const firebaseConfig = {
          apiKey: "AIzaSyBMoVqbGK9NLUCZDOVuZYqMQnC3wj6dAOM",
          authDomain: "web-cozumleme-dersi-projesi.firebaseapp.com",
          projectId: "web-cozumleme-dersi-projesi",
          storageBucket: "web-cozumleme-dersi-projesi.appspot.com",
          messagingSenderId: "555907940508",
          appId: "1:555907940508:web:3205530253bcfc435f2d59"
        };

const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const auth = getAuth();

// Profili Kaydet butonuna tıklandığında çalışacak fonksiyon
  savedButton.addEventListener('click', (e) => {
  // Kullanıcı bilgilerini input alanlarından al
  var isim = document.getElementById('isim').value;
  var soyisim = document.getElementById('soyisim').value;
  var telefon = document.getElementById('telefon').value;
  var meslek = document.getElementById('meslek').value;
  var adres = document.getElementById('adres').value;
  var sehir = document.getElementById('sehir').value;
  var mail = document.getElementById('mail').value;

  // Kullanıcı ID'si
  const userId = auth.currentUser.uid;

  // Veritabanında kullanıcı bilgilerini güncelle
  set(ref(database, 'users/' + userId), {
    isim: isim,
    soyisim: soyisim,
    telefon: telefon,
    meslek: meslek,
    adres: adres,
    sehir: sehir,
    mail: mail
  }).then(() => {
    alert('Profil başarıyla güncellendi!');
  }).catch((error) => {
    alert('Profil güncellenirken bir hata oluştu: ' + error.message);
  });
      alert('kaydedildi');

});

// Arabayı Kaydet butonuna tıklandığında çalışacak fonksiyon
  carButton.addEventListener('click', (e) => {
  // Araba bilgilerini input alanlarından al
  var marka = document.getElementById('marka').value;
  var model = document.getElementById('model').value;

  const userId = auth.currentUser.uid;
  // Veritabanında araba bilgilerini kullanıcı altında kaydet
  set(ref(database, 'users/' + userId + '/arabalar'), {
    marka: marka,
    model: model
  }).then(() => {
    alert('Araba bilgileri başarıyla kaydedildi!');
  }).catch((error) => {
    alert('Araba bilgileri kaydedilirken bir hata oluştu: ' + error.message);
  });
});
  
    </script>
 
  </body>
</html>